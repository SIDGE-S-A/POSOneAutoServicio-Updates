name: Deploy latest.yml and assets to Surge

on:
    release:
        types: [published]

jobs:
    deploy:
        runs-on: ubuntu-latest

        steps:
            - name: ðŸ“¦ Checkout repo
              uses: actions/checkout@v4

            - name: ðŸ§© Descargar assets del release principal
              uses: robinraju/release-downloader@v1.10
              with:
                  repository: SIDGE-S-A/POSOneAutoServicio
                  latest: true
                  out-file-path: ./public

            - name: ðŸ“‹ Listar archivos descargados (debug)
              run: ls -R ./public

            - name: ðŸš€ Instalar y desplegar en Surge
              run: |
                  npm install -g surge
                  surge ./public posoneauto-updates.surge.sh --token ${{ secrets.SURGE_TOKEN }}

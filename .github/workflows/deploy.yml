name: Deploy Updates to Surge

on:
    repository_dispatch:
        types: [deploy-from-main]

jobs:
    deploy:
        runs-on: ubuntu-latest

        steps:
            - name: ðŸ“¦ Checkout updates repo
              uses: actions/checkout@v4

            - name: ðŸ§© Download assets from main release
              uses: robinraju/release-downloader@v1.10
              with:
                  repository: SIDGE-S-A/POSOneAutoServicio
                  latest: true
                  out-file-path: ./public

            - name: ðŸš€ Deploy to Surge
              run: |
                  npm install -g surge
                  surge ./public posoneauto-updates.surge.sh --token ${{ secrets.SURGE_TOKEN }}
